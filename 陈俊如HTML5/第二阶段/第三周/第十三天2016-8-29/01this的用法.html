<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="author" content="陈俊如">
        <title>this的用法</title>
        <style>
            
        </style>
    </head>
    <body>
        <pre>
            this是什么
            this返回的是window或者对象本身（具体分析）
            函数大多数情况下，函数的调用方式不同，this返回的值也是不一样的
        </pre>
        <div>
            通过点击事件调用函数
        </div>
        <button class="b1">点击1</button>
        <button class="b2">点击2</button>
        <button class="b3">点击3</button>
        <script>
            //1. this指向的是window
            // console.log( this )
            // console.log( window )
            // if ( this == window ){
            //     alert( true )
            // }
            // else{
            //     alert( false )
            // }
            // function add(){
            //     console.log( this )//window
            //     function add2(){
            //         console.log( this )//window
            //         function add3(){
            //             console.log( this )//window
            //         }
            //     }
            //     add2()
            // }
            // add()
            
            
            //2. 在事件调用函数中，this指的是调用事件的元素  ev指的是事件本身
            document.querySelector('div').onclick = function( ev ) {
                console.log( this )
                console.log( ev )
            }
            
           var btns = document.querySelectorAll('button')
           for( var i = 0 ;i < btns.length;i++){
                btns[i].index = i
               btns[i].onclick = function(){                 
                    console.log( this )
                    console.log( this.index )//this.index == btns[i].index
               }
              
           } 
        //   3.构造函数 this指向的是构造函数本身
        function box(){
            console.log( this )
            this.name = 'chen'
            this.age = 3
        }
        
        var results = new box() //this==构造函数本身
        var result = box() //this ==window
        
        // 4 在对象中使用this,this指向的是对象本身
        var obj ={  
            name : 'chen',
            age : 10,
            run: function(){
                console.log( this )
            }
        }
        obj.run()  
        
        // 实例
        var name = 'chang'
        var age = 30
        function boxs(){//this指向的是window
            console.log( this )
            console.log(this.name)
            console.log(this.age)
        }
        boxs()
        
        function box1(){
            console.log( this )
            this.name = 'banzhang'
            this.age = '20'
            console.log( this.name )
            console.log( this.age )
            // this指向的是window
        }
        box1()
        
        var text = new box1()//这里的this是构造函数本身
        
        
        
        
        </script>
    </body>
</html>